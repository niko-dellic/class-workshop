<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- 01 ADD CSS -->
    <link rel="stylesheet" href="./beginner-mapbox.css" />

    <!-- 02 ADD MAPBOX -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css"
      rel="stylesheet"
    />
    <!-- 03 NAME PROJECT -->
    <title>Philly Forever</title>
  </head>
  <body>
    <!-- 04 ADD MAP CONTAINER -->
    <div id="map"></div>

    <!-- 05 ADD SCRIPT TAGS -->
    <script>
      // ADD YOUR MAPBOX IDENTITY
      mapboxgl.accessToken =
        "pk.eyJ1Ijoibmlrby1kZWxsaWMiLCJhIjoiY2w5c3p5bGx1MDh2eTNvcnVhdG0wYWxkMCJ9.4uQZqVYvQ51iZ64yG8oong"; //YOUR KEY HERE

      // CREATE A NEW OBJECT CALLED MAP
      const map = new mapboxgl.Map({
        container: "map", // container ID for the map object
        style: "mapbox://styles/niko-dellic/cl9t226as000x14pr1hgle9az", // style URL
        center: [-75.1652, 39.9526], // starting position [lng, lat]
        zoom: 12, // starting zoom
        projection: "globe", // display the map as a 3D globe
      });
      map.on("style.load", () => {
        map.setFog({}); // Set the default atmosphere style
      });

      // ADD A GEOJSON SOURCE
      map.on("load", function () {
        map.addSource("philly", {
          type: "geojson",
          data: "./heatVulnerability.geojson",
        });

        // ADD A LAYER TO THE MAP
        map.addLayer({
          id: "philly",
          type: "fill",
          source: "philly",
          layout: {},
          paint: {
            "fill-color": [
              // first introduce conditional in-case of null values
              "case",
              ["==", ["get", "HSI_SCORE"], null],
              "rgba(0,0,0,0)",
              [
                // then use a linear ramp to display number values
                "interpolate",
                ["linear"],
                ["get", "HSI_SCORE"],
                0,
                "rgba(255,0,0,0)",
                1,
                "rgba(60,60,60,20)",
                2,
                "rgba(90,60,60,100)",
                3,
                "rgba(175,60,60,175)",
                4,
                "rgba(255,60,60,225)",
              ],
            ],
            "fill-opacity": 0.9,
          },
        });
      });
    </script>
  </body>
</html>
